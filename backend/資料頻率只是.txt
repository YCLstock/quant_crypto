根據目前的實作，讓我總結一下系統功能和資料收集範圍：

### 1. 已實現的功能

1. 基礎架構

- PostgreSQL 數據庫連接和模型定義

- Alembic 數據庫遷移系統

- 日誌記錄系統

2. 數據收集

- 即時市場數據 (Market Data)

  - 價格 (price)

  - 交易方向 (side: buy/sell)

  - 開高低收價格

  - 交易量

  - 價格變動百分比

  

- 訂單簿數據 (Order Books)

  - 買賣盤深度 (Depth)

  - 每5秒更新一次

  - 保存最新100檔價格和數量

- WebSocket 實時數據

  - 交易數據 (@trade)

  - 24小時行情 (@ticker)

  - 深度數據 (@depth20@100ms)

3. 監控交易對

目前監控三個主要交易對：

```python

['BTCUSDT', 'ETHUSDT', 'BNBUSDT']

```

### 2. 數據收集頻率

1. 市場數據

- 定期收集：每1分鐘

- 包含24小時統計信息

2. 訂單簿

- 更新頻率：每5秒

- 深度：100檔買賣盤

3. WebSocket 數據

- 交易數據：實時

- Ticker：實時

- 深度數據：100ms更新一次

### 3. 存儲範圍

1. Exchange 表

- 交易所基本信息

- API配置

- 狀態追踪

2. TradingPair 表

- 交易對信息

- 基礎幣種和計價幣種

- 活動狀態

3. MarketData 表

- 價格信息

- 交易量

- 價格變動

- 其他市場統計

4. OrderBook 表

- 買賣盤深度

- 最後更新ID

- 時間戳

### 4. 後續可擴展方向

1. 數據分析

- 添加價格趨勢分析

- 實現交易量分析

- 添加技術指標計算

2. 監控告警

- 價格異常波動監控

- 大額交易監控

- 深度異常監控

3. 數據存儲優化

- 實現數據壓縮

- 添加數據歸檔功能

- 優化查詢性能

4. 擴展交易對

- 添加更多交易對的監控

- 支持動態添加/移除交易對

5. 數據可視化

- 添加實時圖表

- 開發監控儀表板

- 提供數據導出功能

